# AI Agent Assistant 功能对比说明

## 📊 版本对比

### v0.4版本（当前发布版本）

**发布日期**: 2026-01-28
**状态**: ✅ 生产就绪
**API端点**: 16个

#### 主要功能

1. **统一模型抽象** ✅
   - 支持18+种主流模型
   - 统一的Model接口
   - 无缝切换模型

2. **RAG增强** ✅
   - 语义分块
   - 混合检索（向量+BM25）
   - Cross-Encoder重排序

3. **推理能力** ✅
   - 思维链推理（Chain-of-Thought）
   - 自我反思（Self-Reflection）
   - 多步推理支持

4. **评估系统** ✅
   - 智能评分（包含关系识别）
   - 准确性评估
   - 性能评估

5. **智能记忆** ✅
   - 自动记忆提取
   - 语义检索
   - 优化策略

6. **会话管理** ✅
   - 自动摘要生成
   - 状态版本管理
   - 并发控制

#### 可测试的API

```bash
# 基础功能（3个）
GET /health
GET /api/v1/models
GET /api/v1/models/:name

# 对话功能（2个）
POST /api/v1/chat
POST /api/v1/chat/rag

# 推理能力（2个）
POST /api/v1/reasoning/cot
POST /api/v1/reasoning/reflect

# 会话管理（3个）
GET /api/v1/session
DELETE /api/v1/session
POST /api/v1/session/state

# 知识库（3个）
POST /api/v1/knowledge/add
GET /api/v1/knowledge/stats
POST /api/v1/knowledge/search

# 记忆管理（2个）
POST /api/v1/memory/extract
GET /api/v1/memory/search

# 评估系统（1个）
POST /api/v1/eval/accuracy
```

---

### v0.5第一阶段（刚完成）

**完成日期**: 2026-01-28
**状态**: ⚠️ 内部框架完成，未集成API
**新增模块**: 6个核心模块

#### 新增能力（内部框架）

1. **Agent编排器** 🆕
   - Agent注册表
   - 智能任务分配
   - Agent负载均衡
   - 健康检查和心跳机制

2. **工作流引擎** 🆕
   - YAML工作流定义
   - DAG构建和验证
   - 拓扑排序
   - 并行执行识别

3. **任务调度器** 🆕
   - 优先级队列
   - 自动任务调度
   - 重试机制
   - 任务生命周期管理

4. **通信机制** 🆕
   - 点对点消息传递
   - 广播消息
   - 事件总线
   - 订阅机制

#### 可测试的功能

目前v0.5是**内部框架**，没有对外API。但可以通过演示程序查看：

```bash
# 运行演示程序
./bin/demo
```

演示内容包括：
- Agent注册表演示
- 任务调度器演示
- 通信总线演示
- 工作流引擎演示

---

## 🔍 功能对比表

| 功能模块 | v0.4 | v0.5 Phase 1 | v0.5 Phase 2 (计划) |
|---------|------|--------------|-------------------|
| **模型支持** | ✅ 18+种 | ✅ 继承 | ✅ 继承 |
| **RAG能力** | ✅ | ✅ 继承 | ✅ 继承 |
| **推理能力** | ✅ 单Agent | ❌ 未实现 | 🆕 多Agent协作推理 |
| **工作流** | ❌ | 🆕 引擎（内部） | 🆕 API + 执行器 |
| **任务编排** | ❌ | 🆕 调度器（内部） | 🆕 API + 分解器 |
| **多Agent** | ❌ | 🆕 注册表（内部） | 🆕 专家Agent + API |
| **通信机制** | ❌ | 🆕 总线（内部） | 🆕 继承 |

---

## 🎯 v0.4 可测试场景

### 场景1：单模型对话

```bash
# 使用GLM模型对话
curl -X POST http://localhost:8080/api/v1/chat \
  -H "Content-Type: application/json" \
  -d '{
    "session_id": "test",
    "message": "你好",
    "model": "glm"
  }'
```

### 场景2：多模型切换

```bash
# 同一会话切换不同模型
curl -X POST http://localhost:8080/api/v1/chat \
  -H "Content-Type: application/json" \
  -d '{"session_id": "test", "message": "第一句", "model": "glm"}'

curl -X POST http://localhost:8080/api/v1/chat \
  -H "Content-Type: application/json" \
  -d '{"session_id": "test", "message": "第二句", "model": "qwen"}'
```

### 场景3：知识库+RAG

```bash
# 1. 添加知识
curl -X POST http://localhost:8080/api/v1/knowledge/add \
  -H "Content-Type: application/json" \
  -d '{"text": "项目采用Go语言开发", "source": "技术文档"}'

# 2. RAG对话
curl -X POST http://localhost:8080/api/v1/chat/rag \
  -H "Content-Type: application/json" \
  -d '{"session_id": "rag", "message": "这个项目用什么语言开发？"}'
```

### 场景4：思维链推理

```bash
# 复杂数学题推理
curl -X POST http://localhost:8080/api/v1/reasoning/cot \
  -H "Content-Type: application/json" \
  -d '{"task": "一个农场有鸡和兔共50只，鸡腿加兔腿共140条，鸡和兔各有多少只？"}'
```

### 场景5：智能评估

```bash
# 测试答案（即使包含关键词也算对）
curl -X POST http://localhost:8080/api/v1/eval/accuracy \
  -H "Content-Type: application/json" \
  -d '{
    "test_cases": [
      {"input": "2+2=?", "expected_output": "4"}
    ]
  }'
# 即使模型回答"2 + 2 = 4"也能识别为正确！
```

---

## 📝 快速测试命令

### 方式1：使用测试脚本（推荐）

```bash
# 一键测试所有v0.4功能
./test_v04_api.sh
```

### 方式2：单独测试

```bash
# 最简单的测试 - 健康检查
curl http://localhost:8080/health

# 最常用的功能 - 对话
curl -X POST http://localhost:8080/api/v1/chat \
  -H "Content-Type: application/json" \
  -d '{"session_id": "test", "message": "你好", "model": "glm"}'
```

---

## 🆕 v0.5新增能力详解

### 1. Agent编排器（虽然无API）

**能力**：
- 可以注册多个Agent
- 每个Agent有不同的能力（如search, analyze, write）
- 系统能自动选择最合适的Agent执行任务

**意义**：
- 这是多Agent协作的基础
- 下一步可以实现专家Agent团队

### 2. 工作流引擎（虽然无API）

**能力**：
- 用YAML定义复杂的工作流
- 自动解析依赖关系（A依赖B，必须先做B）
- 自动识别可以并行执行的步骤

**意义**：
- 可以定义复杂的处理流程
- 下一步可以实现自动化任务链

---

## 🚀 总结

### 现在可以测试什么？
✅ v0.4的所有16个API端点
✅ 包括推理、评估、RAG等新功能

### v0.5是什么？
⚠️ 目前是**内部框架**，没有对外API
✅ 已实现Agent编排、工作流引擎等底层能力
📅 需要第二阶段才能对外提供API

### 什么时候能用v0.5的API？
📅 预计需要完成第二阶段（Day 2）开发
🎯 目标：工作流API、多Agent协作API等

---

**测试脚本位置**: `test_v04_api.sh`
**演示程序位置**: `./bin/demo`
**服务器状态**: 运行中 (端口8080)
